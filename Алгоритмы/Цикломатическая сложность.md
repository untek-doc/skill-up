**Цикломатическая сложность** — это метрика, используемая для измерения сложности программного кода. Она помогает определить, насколько сложно будет тестировать и поддерживать код, и часто используется как индикатор необходимости рефакторинга.

### Основные моменты:
- **Цикломатическая сложность** показывает количество независимых путей в программе, которые нужно протестировать для полного покрытия кода.
- Метрика основана на графе потока управления программы: узлы представляют собой инструкции, а рёбра — переходы между ними.
- Чем выше цикломатическая сложность, тем сложнее код, и тем труднее его тестировать и поддерживать.

### Формула цикломатической сложности:
Цикломатическая сложность рассчитывается по формуле:

```
M = E - N + 2P
```

где:
- **M** — цикломатическая сложность,
- **E** — количество рёбер в графе потока управления,
- **N** — количество узлов в графе,
- **P** — количество компонент связности (в большинстве случаев это 1, если программа не имеет изолированных частей).

### Пример:
В коде на PHP, если вы используете конструкцию с несколькими ветвлениями, такими как `if`, `for`, `while`, цикломатическая сложность будет увеличиваться с каждым ветвлением или условием.

```php
function example($a, $b) {
    if ($a > 0) {
        if ($b > 0) {
            return $a + $b;
        } else {
            return $a - $b;
        }
    } else {
        return $a;
    }
}
```

Здесь:
- Для каждого условия `if` или ветвления создаётся новый независимый путь. В данном примере 3 пути.
- Цикломатическая сложность для этой функции будет 3.

### Как уменьшить цикломатическую сложность:
- **Рефакторинг**: Разделение больших функций на более мелкие.
- **Упрощение логики**: Использование полиморфизма, стратегий, фабрик вместо большого количества условий.
- **Меньше вложенных условий**: Избегайте глубоких вложений, вместо этого используйте ранний возврат из функции.

### Почему это важно?
- **Тестируемость**: Чем выше цикломатическая сложность, тем больше тестов нужно для покрытия кода.
- **Поддерживаемость**: Код с низкой сложностью легче поддерживать, вносить изменения и исправлять ошибки.
- **Надежность**: Простые и менее сложные функции с большей вероятностью будут корректно работать в долгосрочной перспективе.

Рекомендуемая цикломатическая сложность для методов — не более 10, иначе это сигнализирует о необходимости рефакторинга.