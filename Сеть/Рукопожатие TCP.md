**Рукопожатие TCP** (TCP Handshake) — это процесс установления соединения между двумя устройствами (например, клиентом и сервером) в сети, использующий протокол TCP (Transmission Control Protocol). TCP является протоколом с установлением соединения, что означает, что перед передачей данных необходимо сначала установить надежное соединение. Рукопожатие TCP происходит в три этапа, и этот процесс известен как "трехступенчатое рукопожатие" (three-way handshake).

### Этапы рукопожатия TCP

1. **SYN** (Synchronize):
   - Клиент отправляет серверу сегмент TCP с установленным флагом SYN. Этот сегмент используется для инициации соединения и включает начальный номер последовательности (Sequence Number), который будет использоваться для передачи данных.

   Пример:  
   ```
   Клиент -> Сервер: SYN, Seq = x
   ```

2. **SYN-ACK** (Synchronize-Acknowledge):
   - Сервер принимает запрос на соединение и отправляет обратно сегмент с установленными флагами SYN и ACK. В этом сегменте сервер также указывает свой собственный номер последовательности и подтверждает получение запроса клиента, отправляя номер ACK (x + 1), что означает, что он готов принимать данные от клиента.

   Пример:  
   ```
   Сервер -> Клиент: SYN-ACK, Seq = y, Ack = x + 1
   ```

3. **ACK** (Acknowledge):
   - Клиент получает ответ от сервера и отправляет сегмент с установленным флагом ACK, подтверждая, что он получил SYN-ACK от сервера. В этом сегменте клиент также указывает номер ACK (y + 1), подтверждая готовность к передаче данных.

   Пример:  
   ```
   Клиент -> Сервер: ACK, Seq = x + 1, Ack = y + 1
   ```

### Завершение рукопожатия

После этих трех шагов соединение считается установленным, и клиент и сервер могут начать обмениваться данными. Каждый из них теперь знает начальные номера последовательности и может использовать их для управления потоком данных и обеспечения надежности.

### Преимущества трехступенчатого рукопожатия

- **Надежность**: Процесс рукопожатия гарантирует, что обе стороны готовы к передаче данных, и что все сегменты будут получены и обработаны.
- **Синхронизация**: Позволяет согласовать начальные номера последовательности, что необходимо для правильной организации передачи данных.
- **Устойчивость к сбоям**: Если соединение не может быть установлено, клиент и сервер могут повторить попытку, используя механизм таймаутов.

### Заключение

Рукопожатие TCP является ключевым этапом для установления надежного соединения в сетях, использующих протокол TCP. Этот процесс обеспечивает синхронизацию и надежность, что позволяет приложением эффективно обмениваться данными.