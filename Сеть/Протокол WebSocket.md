**WebSocket** — это протокол связи, который обеспечивает постоянное двустороннее соединение между клиентом (обычно веб-браузером) и сервером через один TCP-соединение. Это позволяет клиенту и серверу обмениваться данными в режиме реального времени без необходимости повторных запросов, как это происходит в традиционном HTTP-протоколе.

### Основные характеристики WebSocket:
1. **Двусторонняя связь**: 
   - В отличие от HTTP, где клиент должен отправить запрос, чтобы получить ответ от сервера, WebSocket поддерживает двустороннюю (full-duplex) связь. Это значит, что как клиент, так и сервер могут отправлять сообщения в любое время.
   
2. **Постоянное соединение**:
   - После установки соединения с помощью handshake через HTTP/HTTPS, канал WebSocket остаётся активным, позволяя клиенту и серверу обмениваться данными до тех пор, пока одно из сторон не разорвет соединение.

3. **Меньшие накладные расходы**:
   - WebSocket использует гораздо меньше сетевых ресурсов по сравнению с традиционными HTTP-запросами, так как при каждом новом запросе не требуется открывать новое соединение и отправлять HTTP-заголовки.

4. **Идеален для приложений в реальном времени**:
   - Подходит для сценариев, требующих мгновенной передачи данных: чат-приложения, онлайн-игры, финансовые биржи, live-обновления.

### Как работает WebSocket
Процесс подключения через WebSocket начинается с обычного HTTP-запроса, называемого "WebSocket Handshake". В ходе этого handshake сервер и клиент договариваются о переходе на протокол WebSocket:

1. **Клиент отправляет HTTP-запрос** с заголовком `Upgrade`, который указывает на переход к WebSocket.
2. **Сервер отвечает**, соглашаясь на обновление протокола.
3. После успешного handshake устанавливается постоянное WebSocket-соединение.

#### Пример WebSocket handshake:
Клиентский запрос:
```
GET /chat HTTP/1.1
Host: example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Version: 13
```

Ответ сервера:
```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
```

После этого установлено постоянное соединение, и клиент и сервер могут обмениваться сообщениями в обоих направлениях без необходимости открывать новое соединение.

### Применение WebSocket
WebSocket используется там, где необходимо быстрое обновление данных и постоянное соединение:

1. **Чат-приложения**: Реализуют мгновенный обмен сообщениями между пользователями.
2. **Онлайн-игры**: Игровые серверы могут обновлять информацию в реальном времени.
3. **Торговые и финансовые системы**: Для передачи данных с минимальной задержкой, например, для потоковых котировок на бирже.
4. **Живые уведомления**: Например, уведомления о новых сообщениях или обновления контента на странице.
5. **Мультиплеерные игры и приложения для совместной работы**: Для обновления состояния в реальном времени (коллаборативные редакторы, например, Google Docs).

### Преимущества WebSocket:
- **Меньшая задержка**: Обеспечивает быструю реакцию благодаря постоянному соединению.
- **Снижение нагрузки на сервер**: Поскольку не нужно постоянно открывать и закрывать соединения, снижаются накладные расходы на обработку запросов.
- **Двусторонняя передача данных**: Сервер может инициировать передачу данных в любой момент.

### Недостатки:
- **Поддержка брандмауэров**: Некоторые корпоративные брандмауэры могут блокировать WebSocket-соединения.
- **Сложность**: WebSocket-приложения сложнее в реализации по сравнению с традиционными HTTP-запросами.

### Пример использования WebSocket в JavaScript:

```javascript
// Создание WebSocket-соединения
const socket = new WebSocket('ws://example.com/socket');

// Открытие соединения
socket.addEventListener('open', function (event) {
    socket.send('Привет, сервер!');
});

// Прослушивание сообщений от сервера
socket.addEventListener('message', function (event) {
    console.log('Сообщение от сервера: ', event.data);
});

// Закрытие соединения
socket.addEventListener('close', function (event) {
    console.log('Соединение закрыто');
});

// Обработка ошибок
socket.addEventListener('error', function (event) {
    console.log('Ошибка WebSocket: ', event);
});
```

### Заключение:
WebSocket — это мощный инструмент для приложений, требующих реального времени и минимальной задержки данных. Его основное преимущество — поддержка постоянного двустороннего соединения между клиентом и сервером, что делает его идеальным выбором для таких приложений, как чаты, онлайн-игры, системы уведомлений и финансовые платформы.