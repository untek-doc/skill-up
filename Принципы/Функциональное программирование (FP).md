**Функциональное программирование (FP)** — это парадигма программирования, в которой основное внимание уделяется функциям как основным строительным блокам программы. В функциональном программировании функции рассматриваются как чистые математические выражения: они всегда возвращают одно и то же значение для одного и того же набора входных данных и не изменяют внешнее состояние программы (нет побочных эффектов).

### Основные принципы функционального программирования

1. **Чистые функции (Pure Functions)**  
   Функция называется чистой, если она не изменяет никаких внешних данных и всегда возвращает одинаковый результат при одинаковых входных данных. У чистых функций нет побочных эффектов, и они не изменяют состояние программы.
   
   **Пример чистой функции на PHP:**
   ```php
   <?php
   function add($x, $y) {
       return $x + $y;
   }

   echo add(2, 3); // всегда вернет 5
   ?>
   ```

2. **Неизменяемость (Immutability)**  
   В функциональном программировании данные считаются неизменяемыми. Вместо изменения данных, создаются новые объекты с новыми значениями. Это уменьшает количество ошибок, связанных с изменением состояния.
   
   **Пример неизменяемых данных:**
   ```php
   <?php
   $array = [1, 2, 3];
   $newArray = array_map(function($item) {
       return $item * 2;
   }, $array);

   print_r($newArray); // [2, 4, 6]
   print_r($array);    // исходный массив [1, 2, 3] не изменился
   ?>
   ```

3. **Функции высшего порядка (Higher-Order Functions)**  
   Это функции, которые могут принимать другие функции как аргументы или возвращать их. Это позволяет создавать более гибкие и повторно используемые блоки кода.
   
   **Пример функции высшего порядка:**
   ```php
   <?php
   function applyFunction($func, $x, $y) {
       return $func($x, $y);
   }

   function add($x, $y) {
       return $x + $y;
   }

   function multiply($x, $y) {
       return $x * $y;
   }

   echo applyFunction('add', 2, 3);       // 5
   echo applyFunction('multiply', 2, 3);  // 6
   ?>
   ```

4. **Каррирование (Currying)**  
   Каррирование — это процесс, при котором функция, которая принимает несколько аргументов, преобразуется в набор вложенных функций, каждая из которых принимает один аргумент.
   
   **Пример каррирования:**
   ```php
   <?php
   function add($x) {
       return function($y) use ($x) {
           return $x + $y;
       };
   }

   $addFive = add(5);
   echo $addFive(10);  // 15
   ?>
   ```

5. **Рекурсия (Recursion)**  
   Вместо циклов функциональное программирование активно использует рекурсию. Это когда функция вызывает саму себя до тех пор, пока не будет достигнуто базовое условие.

   **Пример рекурсии на PHP:**
   ```php
   <?php
   function factorial($n) {
       if ($n === 1) {
           return 1;
       }
       return $n * factorial($n - 1);
   }

   echo factorial(5);  // 120
   ?>
   ```

6. **Композиция функций (Function Composition)**  
   Композиция — это объединение нескольких функций в одну. Это полезно, когда необходимо применять несколько преобразований к данным поочередно.
   
   **Пример композиции функций:**
   ```php
   <?php
   function multiplyByTwo($x) {
       return $x * 2;
   }

   function subtractOne($x) {
       return $x - 1;
   }

   function compose($f, $g) {
       return function($x) use ($f, $g) {
           return $f($g($x));
       };
   }

   $combined = compose('multiplyByTwo', 'subtractOne');
   echo $combined(5);  // (5 - 1) * 2 = 8
   ?>
   ```

### Преимущества функционального программирования

- **Предсказуемость и тестируемость**: Благодаря чистым функциям и неизменяемым данным, поведение программы легко предсказать, а тестирование становится проще.
- **Меньше ошибок**: Избегание изменения состояния и побочных эффектов приводит к уменьшению количества ошибок, связанных с изменяемыми данными.
- **Удобство для параллелизма**: Функции, которые не зависят от внешнего состояния, легче распараллелить, что увеличивает производительность в многозадачных системах.

### Пример функционального подхода на PHP

```php
<?php
// Чистая функция, которая не изменяет внешнее состояние
function square($x) {
    return $x * $x;
}

// Функция высшего порядка, которая принимает другую функцию и применяет её к каждому элементу массива
function map($func, $array) {
    $result = [];
    foreach ($array as $item) {
        $result[] = $func($item);
    }
    return $result;
}

$numbers = [1, 2, 3, 4, 5];

// Применяем функцию square ко всем элементам массива
$squaredNumbers = map('square', $numbers);

print_r($squaredNumbers);  // [1, 4, 9, 16, 25]
?>
```

### Когда использовать функциональное программирование

Функциональный подход особенно полезен в следующих случаях:
- Когда важно избегать изменения состояния и побочных эффектов.
- Когда нужно легко тестировать функции.
- Когда важно поддерживать высокую параллелизацию и масштабируемость.
- Когда требуются функции высшего порядка и композиция функций для гибкости кода.

### Заключение

Функциональное программирование в PHP предлагает чистый, предсказуемый и легко тестируемый способ написания кода. Хотя PHP традиционно был процедурным и объектно-ориентированным языком, возможности функционального программирования дают разработчикам больше гибкости в выборе подхода к решению задач.